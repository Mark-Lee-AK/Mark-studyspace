# 生产者和消费者模型



### 线程通信模型

- 生产者生产数据，放入一个数据容器
- 消费者从容器获取数据
- 线程间解耦

### 步骤

1. 创建`Producer`和`Consumer`类，继承`Thread`
2. 在两个类中都声明一个容器变量，用于实例化对象时存入共享数据
3. `Producer`负责往共享数据的容器内添加元素，`run`方法实现
4. `Consumer`负责往共享数据的容器内取出元素，`run`方法实现
5. 为两个类添加和取出共享数据的代码加上`synchronized`关键字用于获取同步锁
6. 在`Test`类创建共享数据的容器`LinkedList`集合
7. 实例化生产者和消费者，并执行`start()`方法

### 实现等待合通知

实现：当容器里没有数据时，消费者`Consumer`对象应该等待生产者`Producer`生产数据；而当生产者生产出数据时，应该通知消费者获取数据。

这里用到了Object的方法

- `wait()`
- `notify()`
- `notifyAll()`

**注意**

- 这些方法必须在`synchronized`中调用
- 等待通知的对象必须是加锁的对象
- `wait()`外面，总应该是一个循环条件判断

### 同步监控

遇到`synchronized`关键字，会在加锁的对象上，关联一个同步监视器